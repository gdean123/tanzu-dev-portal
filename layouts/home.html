{{ define "main" }}
<h1 class='d-none'>{{ .Title }} Homepage</h1>

<a id="td-block" class="td-offset-anchor"></a>
<section id="hero" class="td-box td-box--primary position-relative td-box--gradient td-box--height-auto">
	<div class="container row py-5">
		<div class="col-12 mx-auto col-lg-6">
			<span class="h1 mb-0 ">
				{{ .Params.tagline }}
			</span>
            <p class="h4">The VMware Tanzu developer center provides you everything you need to build, run & deploy modern apps.</p>
            <a href={{ "/learn" | relURL }} class="cta-btn-wrapper my-5 overflow-hidden d-flex justify-content-between align-items-center position-relative">
                <div class="solid-rect position-absolute"></div>
                <div class="cta-btn p-4 m-0 d-inline-block text-uppercase fs-80">Get started with Tanzu</div>
                <div class="arrow-box d-inline-block d-flex justify-content-center align-items-center">
                    <div class="arrow-right"></div>
                </div>
            </a>
		</div>
        <div class="col-12 mx-auto col-lg-6">
			
		</div>
	</div>
</section>

<section id="home-topics" class="td-box position-relative">
    <div class="container d-flex row flex-nowrap justify-content-between">
        <div class="col-4">
            <h2>Modern Applications</h2>
            <p class="h4">Build, run, and manage all your apps across any cloud with application modernizationâ€¯solutions and guidance from VMware Tanzu.</p>
        </div>
        <div class="col-7">
            <div class="d-flex row justify-content-between flex-nowrap">
                <div class="flex-315 card-wrapper px-0">
                    <div class="mod-app-card">
                        <h3 class="text-center">Learn the Basics</h3>
                        <p class="px-4">VMware Tanzu offers the tools and products you need to become a high-velocity engineering team and push your code to production faster.</p>
                    </div>
                </div>
                <div class="flex-315 card-wrapper px-0">
                    <div class="mod-app-card">
                        <h3 class="text-center">Modernize</h3>
                        <p class="px-4">Modern applications need to run on modernized infrastructure that provides the automation, security, and scalability to respond to external disruptions and the rapidly changing needs of your customers.</p>
                    </div>
                </div>
                <div class="flex-315 card-wrapper px-0">
                    <div class="mod-app-card">
                        <h3 class="text-center">Transform</h3>
                        <p class="px-4">Companies are using digital technology to drive nimble innovation, find better ways of working, adopt inventive business models, and deliver engaging new customer experiences.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
  
  </section>

<!-- Gather topic groups -->
{{ $topicgroups := (slice) }}
{{ range (.Site.GetPage "taxonomyTerm" "topicgroups").Pages }}
    {{ $topicgroups = union $topicgroups ( slice .Title )}}
{{ end }}

<!-- Build topic groups -->
<a id="td-block" class="td-offset-anchor"></a>
<section class="row td-box td-box--gradient td-box--height-auto">
{{ range $topicgroups }}
    <div class="row justify-content-left w-100 td-box td-box--gray-dark mb-lg-4">
        <div class="col-3 h3">
            {{ . }}
        </div>
        {{ range where (($.Site.GetPage "taxonomyTerm" "topics").Pages) ".Params.topicgroups" . }}
            {{ $link := replace (lower .Params.linktitle) "/" "-"  }}
            {{ $link := replace $link "&" "and" }}
            {{ $link := replace $link " " "-" }}
            {{ $link := printf "%s/%s" "/topics" $link | relURL }}
            <div class="topic col-lg-3 my-lg-2 td-box td-box--gray-dark">
                <a href="{{ $link }}">
                    <div class="h3 link">
                        {{ .Params.grouptitle }}
                    </div>
                    <div class="py-3 px-4 mb-4 text-left h4 text-white" >
                        {{ .Description }}
                    </div>
                </a>
            </div>
        {{ end }}
    </div>
{{ end }}
</section>

<!-- Featured Learning Paths -->
<a id="td-block" class="td-offset-anchor"></a>
<section class="row pt-0 mx-0 td-box td-box--gray-dark td-box--gradient td-box--height-auto">
	
    <div class="row justify-content-center w-100">
        <div class="col-sm-12 pb-4">
            <h3>Featured Learning Paths</h3>
        </div>
    </div>

    
    <div class="row justify-content-center flex-nowrap w-100">
        {{ $learningpaths := where (where .Site.Pages "Section" "learningpaths") ".Params.featured" true }}
        {{ range $learningpaths }} <!-- TODO: Get featured learning paths -->
            {{ partial "learningpaths-card.html" . }}
        {{ end }}

    </div>
</section>

<script>sendAmplitudeEventOnLoad('home viewed', {'url path': window.location.pathname});</script>

{{ with .Content }}
{{ . }}
{{ end }}
{{ end }}