{{ define "main" }}
<h1 class='d-none'>{{ .Title }} Homepage</h1>

<a id="td-block" class="td-offset-anchor"></a>
<section id="hero" class="td-box td-box--primary position-relative td-box--gradient td-box--height-auto">
	<div class="container row py-5">
		<div class="col-12 mx-auto col-lg-6">
			<span class="h1 mb-0 ">
				{{ .Params.tagline }}
			</span>
            <p class="h4">The VMware Tanzu developer center provides you everything you need to build, run & deploy modern apps.</p>
		</div>
        <div class="col-12 mx-auto col-lg-6">
			
		</div>
	</div>
</section>

<!-- Gather topic groups -->
{{ $topicgroups := (slice) }}
{{ range (.Site.GetPage "taxonomyTerm" "topicgroups").Pages }}
    {{ $topicgroups = union $topicgroups ( slice .Title )}}
{{ end }}

<!-- Build topic groups -->
<a id="td-block" class="td-offset-anchor"></a>
<section class="row td-box td-box--gradient td-box--height-auto">
{{ range $topicgroups }}
    <div class="row justify-content-left w-100 td-box td-box--gray-dark mb-lg-4">
        <div class="col-3 h3">
            {{ . }}
        </div>
        {{ range where (($.Site.GetPage "taxonomyTerm" "topics").Pages) ".Params.topicgroups" . }}
            {{ $link := replace (lower .Title) "/" "-"  }}
            {{ $link := replace $link "&" "and" }}
            {{ $link := replace $link " " "-" }}
            {{ $link := printf "%s/%s" "/topics" $link | relURL }}
            <div class="topic col-lg-3 my-lg-2 td-box td-box--gray-dark">
                <a href="{{ $link }}">
                    <div class="h3 link">
                        {{ .Params.grouptitle }}
                    </div>
                    <div class="py-3 px-4 mb-4 text-left h4 text-white" >
                        {{ .Description }}
                    </div>
                </a>
            </div>
        {{ end }}
    </div>
{{ end }}
</section>

<!-- Getting Started With Tanzu -->
<a id="td-block" class="td-offset-anchor"></a>
<section class="row td-box td-box--gray-dark td-box--gradient td-box--height-auto">
	<div class="row justify-content-center w-100">

        <div class="gs-tanzu col-lg-10 mb-0 mb-lg-0 mx-auto">
            <a href='{{ "/learn" | relURL }}' class="mb-0 text-white d-block">
              Get Started with Tanzu >
            </a>
          </div>

    </div>
</section>


<!-- Featured Learning Paths -->
<a id="td-block" class="td-offset-anchor"></a>
<section class="row pt-0 mx-0 td-box td-box--gray-dark td-box--gradient td-box--height-auto">
	
    <div class="row justify-content-center w-100">
        <div class="col-sm-12 pb-4">
            <h3>Featured Learning Paths</h3>
        </div>
    </div>

    
    <div class="row justify-content-center flex-nowrap w-100">
        {{ $learningpaths := where (where .Site.Pages "Section" "learningpaths") ".Params.featured" true }}
        {{ range $learningpaths }} <!-- TODO: Get featured learning paths -->
        <div class="learning-path-card col-lg-4 mb-2 mb-lg-0 ">
            <a href="{{ .RelPermalink }}">
                <p><div class="py-3 px-4 mb-0 text-left h3 text-white">{{ .Title }} </div></p>
                <div class="learning-path-description py-3 px-4 mb-4 text-left text-white" >
                    {{ .Description }}
                </div>
                <div class="learning-path-duration">
                    <i class="fas fa-hourglass-half"></i>
                    {{ if gt .Params.duration 60 }}
                        <!-- Round up to closest full hour duration -->
                        {{ math.Ceil (div .Params.duration 60.0) }}h    
                    {{ else }}
                        {{ .Params.duration }}m
                    {{ end }}
                </div>
                <div class="learning-path-level">
                    {{ if eq .Params.experience "Beginner" }}
                        <h4><span class="badge badge-success mr-3">Beginner</span></h4>
                    {{ else if eq .Params.experience "Intermediate" }}
                        <h4><span class="badge badge-warning mr-3">Intermediate</span></h4>
                    {{ else if eq .Params.experience "Advanced" }}
                        <h4><span class="badge badge-danger mr-3">Advanced</span></h4>
                    {{ end }}
                </div>
            </a>
        </div>
        {{ end }}

    </div>
</section>

<script>sendAmplitudeEventOnLoad('home viewed', {'url path': window.location.pathname});</script>

{{ with .Content }}
{{ . }}
{{ end }}
{{ end }}