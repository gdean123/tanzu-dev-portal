{{ define "main" }}
<h1 class='d-none'>{{ .Title }} Homepage</h1>

<a id="td-block" class="td-offset-anchor"></a>
<section id="hero" class="td-box td-box--primary position-relative td-box--gradient td-box--height-auto">
	<div class="container row py-5">
		<div class="col-12 mx-auto col-lg-6">
			<span class="h1 mb-0 ">
				{{ .Params.tagline }}
			</span>
            <p class="h4">The VMware Tanzu developer center provides you with everything you need to build, run & deploy modern apps.</p>
            <a href={{ "/learn" | relURL }} class="cta-btn-wrapper my-5 overflow-hidden d-flex justify-content-between align-items-center position-relative">
                <div class="solid-rect position-absolute"></div>
                <div class="cta-btn p-4 m-0 d-inline-block text-uppercase fs-80">Get started with Tanzu</div>
                <div class="arrow-box d-inline-block d-flex justify-content-center align-items-center">
                    <div class="arrow-right"></div>
                </div>
            </a>
		</div>
        <div class="col-12 mx-auto col-lg-6">
			
		</div>
	</div>
</section>

<!-- Gather topic groups -->
{{ $topicgroups := (slice) }}
{{ range (.Site.GetPage "taxonomyTerm" "topicgroups").Pages }}
    {{ $topicgroups = union $topicgroups ( slice .Title )}}
{{ end }}

<!-- Topics -->
<a id="td-block" class="td-offset-anchor"></a>
<section id="home-topics" class="td-box">
    <div class="container px-0 mw-100 mb-4">
        <div id="topic-selector" class="flex row justify-content-center flex-nowrap">
            {{ range $topicgroups }}
                {{ if eq . "Modern Applications"}}
                    <p id={{ lower (replace . " " "-")}} class="col-4 text-center topic-header py-4 h3 px-5 text-white active">{{ . }}</p>
                {{ else }}
                    <p id={{ lower (replace . " " "-")}} class="col-4 text-center topic-header py-4 px-5 h3 text-white">{{ . }}</p>
                {{ end }}
            {{ end }}
        </div>
    </div>
    <div id="topics-row-outer" class="row td-box td-box--gradient td-box--height-auto pt-0 position-relative">
    {{ range $topicgroups }}
            <div id="{{ lower (replace . " " "-")}}-row" class="row justify-content-between w-100 td-box topics-row position-absolute">
            {{ range where (($.Site.GetPage "taxonomyTerm" "topics").Pages) ".Params.topicgroups" . }}
                {{ $link := replace (lower .Params.linktitle) "/" "-"  }}
                {{ $link := replace $link "&" "and" }}
                {{ $link := replace $link " " "-" }}
                {{ $link := printf "%s/%s" "/topics" $link | relURL }}
                <div class="topic-card flex-315 td-box">
                    <a href="{{ $link }}" class="h-100 d-flex flex-column justify-content-center align-items-center p-3">
                        <img src='{{ printf "%s%s%s" "/images/icons/new-icon-" .Params.icon ".svg" | relURL }}'>
                        <div class="h3 link mt-3">
                            {{ .Params.grouptitle }}
                        </div>
                        <p class="px-4 mb-4 text-left h4 text-center py-0" >
                            {{ .Description }}
                        </p>
                    </a>
                </div>
            {{ end }}
        </div>
    {{ end }}
    </div>
</section>


<!-- Featured Learning Paths -->
<a id="td-block" class="td-offset-anchor"></a>
<section id="featured-paths" class="row mx-0 td-box td-box--gray-dark td-box--gradient td-box--height-auto pb-0">
	
    <div class="row justify-content-center w-100">
        <div class="col-sm-12 pb-4 mb-5">
            <h2 class="text-center">Featured Learning Paths</h2>
        </div>
    </div>

    <div class="row justify-content-center flex-nowrap w-100 mw-100">
        {{ $learningpaths := where (where .Site.Pages "Section" "learningpaths") ".Params.featured" true }}
        {{ range $learningpaths }} <!-- TODO: Get featured learning paths -->
            {{ partial "learningpaths-card.html" . }}
        {{ end }}

    </div>
</section>

<script>sendAmplitudeEventOnLoad('home viewed', {'url path': window.location.pathname});</script>

{{ with .Content }}
{{ . }}
{{ end }}
{{ end }}