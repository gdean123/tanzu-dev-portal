{{ define "main" }}
<h1 class='d-none'>{{ .Title }} Homepage</h1>

<a id="td-block" class="td-offset-anchor"></a>
<section id="hero" class="td-box td-box--primary position-relative td-box--gradient td-box--height-auto">
	<div class="container row py-5">
		<div class="col-12 mx-auto col-lg-6">
			<span class="h1 mb-0 ">
				{{ .Params.tagline }}
			</span>
            <p class="h4">The VMware Tanzu developer center provides you everything you need to build, run & deploy modern apps.</p>
		</div>
        <div class="col-12 mx-auto col-lg-6">
			
		</div>
	</div>
</section>

<!-- Build topics -->
{{ $guides := where .Site.Pages "Section" "guides" }}
{{ $topics := (slice) }}
{{ range $guides }}
    {{ $topics = union $topics ( slice .Params.level1 )}}
{{ end }}

<!-- Topics -->
<a id="td-block" class="td-offset-anchor"></a>
<section class="row td-box td-box--dark td-box--gradient td-box--height-auto">
	<div class="row justify-content-center w-100">

        {{ range $topics }}
        {{ $link := replace (lower .) "/" "-"  }}
        {{ $link := replace $link "&" "and" }}
        {{ $link := replace $link " " "-" }}
        {{ $link := printf "%s/%s" "/topics" $link | relURL }}
        <div class="topic col-lg-4 mb-0 mb-lg-0 ">
            <p>
                <a class="py-3 px-4 mb-0 text-left h4 text-white" href="{{ $link }}">{{ . }}</a>
            </p>
            <div class="topic-description py-3 px-4 mb-4 text-left h4 text-white" >
                <!-- Gather Subtopics -->
                {{ $topicguides := where $guides "Params.level1" . }}
                {{ $subtopics := (slice) }}
                {{ range $topicguides }}
                    {{ $subtopics = union $subtopics ( slice .Params.level2 )}}
                {{ end }}
                
                {{ range $subtopics }}
                {{ $subtopiclink := replace (lower .) "/" "-"  }}
                {{ $subtopiclink := replace $subtopiclink "&" "and" }}
                {{ $subtopiclink := replace $subtopiclink " " "-" }}
                {{ $subtopiclink := printf "%s/%s" "/guides" $subtopiclink | relURL }}
                <a href="{{ $subtopiclink }}">{{ . }}</a>
                {{ end }}
            </div>
        </div>
        {{ end }}

		</div>
</section>


<!-- Getting Started With Tanzu -->
<a id="td-block" class="td-offset-anchor"></a>
<section class="row td-box td-box--gray-dark td-box--gradient td-box--height-auto">
	<div class="row justify-content-center w-100">

        <div class="gs-tanzu col-lg-10 mb-0 mb-lg-0 mx-auto">
            <a href="https://learn.tanzu.io" class="mb-0 text-white d-block">
              Get Started with Tanzu >
            </a>
          </div>

    </div>
</section>


<!-- Featured Learning Paths -->
<a id="td-block" class="td-offset-anchor"></a>
<section class="row pt-0 mx-0 td-box td-box--gray-dark td-box--gradient td-box--height-auto">
	
    <div class="row justify-content-center w-100">
        <div class="col-sm-12 pb-4">
            <h3>Featured Learning Paths</h3>
        </div>
    </div>

    
    <div class="row justify-content-center flex-nowrap w-100">
        {{ $learningpaths := where (where .Site.Pages "Section" "learningpaths") ".Params.featured" true }}
        {{ range $learningpaths }} <!-- TODO: Get featured learning paths -->
        <div class="learning-path-card col-lg-4 mb-2 mb-lg-0 ">
            <a href="{{ .RelPermalink }}">
                <p><div class="py-3 px-4 mb-0 text-left h3 text-white">Learning Path {{ .Title }} </div></p>
                <div class="learning-path-description py-3 px-4 mb-4 text-left text-white" >
                    {{ .Description }}
                </div>
                <div class="learning-path-duration">
                {{ .Params.duration }}m <!-- TODO: Format to nearest hour -->
                </div>
                <div class="learning-path-level">
                {{ .Params.experience }}
                </div>
            </a>
        </div>
        {{ end }}

    </div>
</section>

<script>sendAmplitudeEventOnLoad('home viewed', {'url path': window.location.pathname});</script>

{{ with .Content }}
{{ . }}
{{ end }}
{{ end }}